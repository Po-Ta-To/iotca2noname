[{"id":"754bc446.32cfcc","type":"template","z":"be89c2ae.50e6b","name":"Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<head>\n\t<meta name=\"viewport\" content=\"width=320, initial-scale=1\">\n  <title>Web Portal | Classroom 1 (Zhi Wei)</title>\n  <link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\">\n<style>\n#lightcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-left: 30px;\nfloat: left;\nwidth: 45%;\n}\n\n#environmentcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-right: 30px;  \nfloat: right;\nwidth: 45%;\n}\n\nul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    background-color: #333;\n}\n\nli {\n    float: left;\n}\n\nli a {\n    display: block;\n    color: white;\n    border: 1 px solid black;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n}\n\nli a:hover {\n    background-color: #111;\n}\nlabel, input { display:block; }\n    input.text { margin-bottom:12px; width:95%; padding: .4em; }\n    fieldset { padding:0; border:0; margin-top:25px; }\n    h1 { font-size: 1.2em; margin: .6em 0; }\n    div#users-contain { width: 350px; margin: 20px 0; }\n    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }\n    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }\n    .ui-dialog .ui-state-error { padding: .3em; }\n    .validateTips { border: 1px solid transparent; padding: 0.3em; }\n\tinput[type=\"time\"]::-webkit-clear-button {\n\t\tdisplay: none;\n\t}\n</style>\n<ul>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_zw\">Classroom 1 (Zhi Wei)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_gabby\">Classroom 2 (Gabby)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/chat\">CHAT</a></li>\n</ul>\n<script src=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\n  <script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\n  <script>\n  $( function() {\n    var dialog, form;\n\t\n \n    function addtime() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tvar time = document.getElementById(\"time\").value;\n\t\t\n\t\tif(d.getHours()<10){\n\t\t    n = \"0\"+d.getHours();\n\t\t}\n\t\tif(d.getMinutes()<10){\n\t\t    m = \"0\"+d.getMinutes();\n\t\t}\n\t\t\n\t\tvar tempTime = n+\":\"+m;\n\t\tif(tempTime>=time){\n\t\t\talert(\"error! The end time cannot be smaller or same as the current time\");\n\t\t}else{\n\t\t\talert(\"time added \" + time);\n\t\t\tdialog.dialog( \"close\" );\n\t\t\tcountdownTimer(tempTime,time);\n\t\t}\n\t\t\n    }\n\t\n\tfunction countdownTimer(tempTime,time){\n\t\tvar tempArr = tempTime.split(\":\");\n\t\tvar timeArr = time.split(\":\");\n\t\t\n\t\tvar hour1 = parseInt(tempArr[0]);\n\t\tvar hour2 = parseInt(timeArr[0]);\n\t\tvar min1 = parseInt(tempArr[1]);\n\t\tvar min2 = parseInt(timeArr[1]);\n\t\tvar leftovermin = 0;\n\t\t\n\t\tvar leftoverHour = (hour2 - hour1)*60;\n\t\t\n\t\tif(min1 == min2){\n\t\t\tleftovermin = min1;\n\t\t}else if(min2 < min1){\n\t\t\tleftovermin = (60 - min1) + min2;\n\t\t}else if(min2 > min1){\n\t\t\tleftovermin = min2 - min1;\n\t\t}\n\t\t\n\t\tvar finaltime = (leftoverHour + leftovermin)*60;\n\t\tloopTime(finaltime);\n\t}\n\t\n\tfunction loopTime(finaltime){\t\t\n\t\tvar setTime = setInterval(function(){\n\t\t\tfinaltime--;\n\t\t\tdocument.getElementById(\"countdown\").innerHTML = \"<p>Countdown: \"+ finaltime + \" second left.</p>\";\n\t\t\tif(finaltime<1){\n\t\t\t\tclearInterval(setTime);\n\t\t\t\t$.post(\"/classroom_zw\",\n\t\t\t\t{\n\t\t\t\t\tLightStatus1C1: \"0\",\n\t\t\t\t\tLightStatus2C1: \"0\"\n\t\t\t\t},\n\t\t\t\tfunction(data, status){\n\t\t\t\t\t//alert(\"Data: \" + data + \"\\nStatus: \" + status);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t},1000);\n\n\t}\n \n    dialog = $( \"#dialog-form\" ).dialog({\n      autoOpen: false,\n      height: 250,\n      width: 350,\n      modal: true,\n      buttons: {\n        \"Add timing\": addtime,\n        Cancel: function() {\n          dialog.dialog( \"close\" );\n        }\n      },\n      close: function() {\n\t\tdialog.dialog( \"close\" );\n      }\n    });\n \n    $( \"#addtime\" ).button().on( \"click\", function() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tdocument.getElementById(\"time\").value = n+\":\"+m;\n\t\tdocument.getElementById(\"time\").min = n+\":\"+m;\n\t\tdialog.dialog( \"open\" );\n    });\n  } );\n  </script>\n</head>\n\n<body>\n  <div id=\"header\"> \n\t<h1 align=\"center\"> WELCOME! </h1>\n\t<h1 align=\"center\"style=\"color:red;\">Singapore Poly Smart Classroom System </b></h1>\n\t<h1 align=\"center\"> Classroom 1 (Zhi Wei)</h2>\n\t</div>\n\t<div>\n    <div id=\"lightcontrol\">\n\t <h2 align=\"center\"> Light Control </h2>\n\t \n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFOklEQVR4Xu2cX2hbdRTHvyfpOpgTlDmdY6gDpcwusdobW33UB30fwwelQxwMhrNJcUUEUYYv1eFNGQrOMYZ/hoivvijog8qcTVq8SUcfpky2CjKdkznrTHOPpA5dS9b+lpyce6+evvZ3v+ec7+f+ft+bpA0hQT9bpp65Kx12DVAY9hPhAYAGmrfPx5lxDCmUmOtfVb0D3yZlTIp7o73TL3Wn584PMTBCoC0t9ctcBdH+Vbh4tOwdrLWkoXRRbIH0zIxe3/3bpd1gKhDRLUJ+zIJ4/7lL9OaZB/05IU1RmdgB6Z3evTY1tzqPhR2BG0Wn/UeMz4agsfN/4o24gYkVkK3l4SyF9BERbeoMiMWqDJxkzD8ap4yJDZCt5eHHUpx6XwPElTWYcYERbqvmxj/Rrt2sXiyAZMuF55n5ZQJF0w9znYmGKp5/NGoo0RhwxdSZUv4FAu2L2oiF+hzuCHLjb0fZS6RAMuXCk8Q4HKUBS2uHwCNVz/84qp4iA5ItDQ8A9DlAq6Ia/ip1fw1DylTvf+10FH1FAqRvKn9DvY4TBLo1iqFXqsngoOIV71lpXSd+HwmQbCn/FkA7OzGQmCZhNOj3XxXTcxRSB3L3xMi9XcSTjv1Ft4wx93t6/vaT9x04q9mEOpBMqfABAds1h2y1FgP7Kp7/YqvXt3KdKpDsN89uRq3+XSuNRnTNT4Hnr9esrQokM5EfI6JRzQHbrcXET1T6i++1q+N6vSqQbKnQOI9vcm0uJus+Czz/Ia1e1IBkyyODYD6mNZhUHQbCC+t+ue7U5iN/SGkup6MIpLAXjFc0hhKvQfxw0F/8VFy3iaAekInChyBs0xhKugYjfK7ijY9J6zbTUwOSmcjPEFGPxlDiNZjfCXLFIXHdSHdIqcAaA3WmBh8PvOJgZ7QXq+rsEN6ezpY3zWsM1KEa3weef0eHtBfJGhA3ly8Gnr/WbWl7q3SAAMgm+sgCAs9X8UqlSOOeMSBuO8eAuPlkO8TRJ7VldmSpWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS26j8HRM25hBdSe+sk4T6ptW9A1Kx2K2RA3HxSWyUKpPfrvRtSqdohMAaJaJ3aFBEUYuafAXw5l67vlPz7XzEgCzBofooIGyLwJ7KSzDgdrkHfdK9/TqIJMSCZUv5dAj0u0VTSNJj5YCVX3CXRtySQH+L6DzgSRi2n0dgllZx/m0QdMSBJ/4i2XTOlXjgakHZJXL7egAgZKSVjQKScFNIxIEJGSskYECknhXQMiJCRUjIGRMpJIR0DImSklIwBkXJSSMeACBkpJWNApJwU0okhkPwsQBuF5kuazGzg+SLfEyn2XlamVDhCwI6kOSnRLzMfruSKT0loiQG5c3LP+jVhVxXAzRKNJUWDmc/UwlrfzMDrjU8Q2/4RA9LopGfy6Y3d9a5DIBrs3Hfutj2ziMDCR7hEX/DqcFc1M/6jiCgAUSBSTf2fdQxIzOgbEAMSMwdi1k5sdsjSz+SlXmhdzW/teq7cDchlpzp9AxiQFRywHRIzgwyIAXE6tSxDLEOa3yjaR4h2PaftEae3TrQN0q5nQGKWWQbEgLjeA5YhyzllT1n2lGU7xHZIEwfsKStmIWtADIjTU4+FuoW6hbqFuoW603G5aJF2yGrXc3XEMsQyxDLEMsQyxPXE/Hed9pmuXc/VEcsQyxDLEMsQyxDXE9MyZKlTliGWIZYhliGWIZYh1+7A31dYhliGWIZYhliGXPsJqv3eknY9V0f+Au1rn4N1gEBhAAAAAElFTkSuQmCC\">\n\n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFNklEQVR4Xu2cX2hbZRjGnzdh9WJRJ3MmJ4h/LkRE1IpoO08GQy9cmziEUbxQOsTBwCsdOEQQYXhT9VpQxxD/DBGvJMfiRB3upLHiFGQML1SQuSRtXUV0tNicvJJZ/NOm+qV9854TfXv9ned93+eX73tOTpMQ+uhvtjR0XZPTQwDdRqDtIAx1bJ8xzeBqmvAZIv4kOzn1Tb+MSUlvlMduHJg5v2WciQ6AcMO6+mU+BeD5XGPxKJ08ubQuDaWLEgtkbrd/cTOiR0D8GEBZCT+Y+WwbjDffepGq1QUJTWmNxAGZ3bkz08w0HwXjABEukx74gh5jDsBEbj56IWlgEgVkZteOm6M0B0S4sicgVony16mIdyUpYxIDpFHy72fQmzog/lqFf061sCf7buV9/dqrKyYCSK3oP0nAMyCKq5+IwOO5cuVo3FDiMuCPuetF/ykQHYrbiOX6e71y+GqcvcQKpF668yEgdSROA1bWTqF1T7Y8dSyunmID0hgtDDHxCRBtimv4Nd5U/jSwlLpp67GPz8TRVyxAfrxvcMviUuY0CF4cQzvU/NIrh7c4rBNfEguQWsl/mUD7xKcRFeSDXrnynKikg5g6kNmR7bdG6fTnDr3FuoTBCxSlrvYmT7TfRKr9qQOpFwtvgTCmNuFGCjEf8oLK0xuR6PZaVSCNe++4lnng226bjGs9Az/ky+E2zfqqQOqjhQmkcFBzwI3WSoEfzJYrb2xUx/V6VSC1UmGOgMtdm0vEOuaPvKByl1YvakAaI/4wp6mqNZhcHW7lftm0mY4fX5TTXFtJDUi95D8O0LMaQ0nXoKh1d25y6kNp3U56mkDeBmiPxlDiNRhPeEE4Ia7bQVANSK3kf0Wg6zWG6kGN17xyON4D3VWSakDqpQJrDNSTGoxpLwiHe6K9QlQFCI8h3VgoNDUG6kkN5u+8oHJNT7QNyDpsZZz3gjCzjiu7vkRlh7S76usjC4BXDlW8UiliQNw3igFx9Mp2iKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWsv+c0C0jOv3OmqPTvrdKK3+DYiW0451DIijUVrLRIHMjt6ei+iiw0w8TKCtWkPEUYfB54hRQSu1T/Lzv2JAlmF8AUIuDoPiqsnAmc1L0eCl71XnJXoQA1Ir+q8T0QMSTfWbBjNeygfhfom+xYDUi4Vagr+AI+HVmhrtXZIvh1dJFJED0s8f8xFwUuqNowERgNGWMCBCRkrJGBApJ4V0DIiQkVIyBkTKSSEdAyJkpJSMAZFyUkjHgAgZKSVjQKScFNIxIEJGSskYECknhXQSCMQ/C1BeaL6+kmn/2mk+qIj8TqTcs6yi/wqI9vaVk1LNMo54QfiwhJwckJEd25BunQLoConG+kWDGd9nFn8dvOSDT89J9CwGpN3M3G4/32zhMDMN9+w3dyWmFtBo/wsXjDCdbu7PvjM9IyB5QUIUiFRT/2cdA5Iw+gbEgCTMgYS1k5gdsvJ77FJvtNbyW7ueK3cDsuxUr18ABuRfHLAdkjCDDIgBcTq1LEMsQzq/ULSPEO16TtsjSY9OtA3SrmdAEpZZBsSAuL4GLEP+ySm7y7K7LNshtkM6OGB3WQkLWQNiQJzueizULdQt1C3ULdSdjsu/LdIOWe16ro5YhliGWIZYhliGuJ6Yf67TPtO167k6YhliGWIZYhliGeJ6YlqGrHTKMsQyxDLEMsQyxDKkewd+v8IyxDLEMsQyxDKk+xNU+9mSdj1XR34DCvWbg+CsTnMAAAAASUVORK5CYII=\">\n<form action=\"/classroom_zw\" method=\"post\">\n      <h1>Control the Lights Below:</h1>\n      <label for=\"LightStatus1C1\">Light 1 (Green):</label>\n      <select name=\"LightStatus1C1\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n <label for=\"LightStatus2C1\">Light 2 (Red):</label>\n      <select name=\"LightStatus2C1\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n      <input type=\"submit\" />\n\t  </form>\n\t \n\t </div>\n\t </div>\n<div id=\"environmentcontrol\">\n    <h2 align=\"center\"> Classroom Environment </h2>\n<br/>\n<!-- Light On icon by Icons8 -->\n<span></span><img class=\"icon icons8-Light-On\" width=\"50\" height=\"50\" src=\"data:image/png;base64,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\"><text>Current Light Value: </text><a href=\"http://169.254.134.247:1880/sensors/light\">View</a> </span>\n\n<br/><br/>\n\n<div id=\"dialog-form\" title=\"Add timing\">\n \n  <form>\n    <fieldset>\n      <label for=\"time\">Time end</label>\n      <input type=\"time\" name=\"time\" id=\"time\" class=\"text ui-widget-content ui-corner-all\">\n \n      <!-- Allow form submission with keyboard without duplicating the dialog button -->\n      <input type=\"submit\" tabindex=\"-1\" style=\"position:absolute; top:-1000px\">\n    </fieldset>\n  </form>\n</div>\n \n \n\n<button id=\"addtime\">Add timing</button><div id=\"countdown\">Countdown: 0 second left.</div>\n\n</div>\n    \n</div>\n</body>\n\n<script type=\"text/javascript\">\n  \n\n</script>\n\n<style type=\"text/css\">\n\t* {\n\t  font-family: \"Palatino Linotype\", \"Book Antiqua\", Palatino, serif;\n\t  font-style: italic;\n\t  font-size: 24px;\n\t}\n\n\thtml, body, #wrapper {\n   margin: 0;\n   padding: 0;\n   height: 100%;\n  }\n\n\t#wrapper {\n    background-color: #ecf0f1;\n  }\n\n\n\n\n  .content {\n    width: 70%;\n    margin: 0 auto;\n  }\n\n  input[type=\"text\"],\n  input[type=\"button\"] {\n    border: 0;\n    color: #fff;\n  }\n\n  input[type=\"text\"] {\n    background-color: #146EA8;\n    padding: 3px 10px;\n  }\n\n  input[type=\"button\"] {\n    background-color: #f39c12;\n    border-right: 2px solid #e67e22;\n    border-bottom: 2px solid #e67e22;\n    min-width: 70px;\n    display: inline-block;\n  }\n\n  input[type=\"button\"]:hover {\n    background-color: #e67e22;\n    border-right: 2px solid #f39c12;\n    border-bottom: 2px solid #f39c12;\n    cursor: pointer;\n  }\n\n  .system,\n  .username {\n    color: #aaa;\n    font-style: italic;\n    font-family: monospace;\n    font-size: 16px;\n  }\n\n  @media(max-width: 1000px) {\n    .content { width: 90%; }\n  }\n\n  @media(max-width: 780px) {\n    #footer { height: 91px; }\n    #chat_box { padding-bottom: 91px; }\n\n    #user { width: 100%; }\n    #message { width: 80%; }\n  }\n\n  @media(max-width: 400px) {\n    #footer { height: 135px; }\n    #chat_box { padding-bottom: 135px; }\n\n    #message { width: 100%; }\n    #send_btn {\n      position: relative;\n      margin-top: 3px;\n      width: 100%;\n    }\n  }\n</style>","x":480,"y":180,"wires":[["793a5141.de6e9"]]},{"id":"793a5141.de6e9","type":"http response","z":"be89c2ae.50e6b","name":"","x":650,"y":220,"wires":[]},{"id":"6f099f21.21f93","type":"http in","z":"be89c2ae.50e6b","name":"classroom 1 (Zhi Wei)","url":"/classroom_zw","method":"post","upload":false,"swaggerDoc":"","x":140,"y":220,"wires":[["e32e6fbb.2c9f8","454c3bfd.297294","1725861a.572afa","754bc446.32cfcc"]]},{"id":"72373cf6.cc2924","type":"ibmiot out","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"gwid-gw-zhiwei","deviceType":"gw-zhiwei","eventCommandType":"LED1C1","format":"json","data":"{}","qos":0,"name":"Light Control","service":"registered","x":850,"y":280,"wires":[]},{"id":"e32e6fbb.2c9f8","type":"function","z":"be89c2ae.50e6b","name":"get on/off command LED 1 C1","func":"msg.payload = msg.payload.LightStatus1C1\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":320,"wires":[["72373cf6.cc2924","204d5626.f76eca"]]},{"id":"204d5626.f76eca","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":850,"y":340,"wires":[]},{"id":"454c3bfd.297294","type":"debug","z":"be89c2ae.50e6b","name":"Input","active":true,"console":"false","complete":"payload","x":470,"y":260,"wires":[]},{"id":"1725861a.572afa","type":"function","z":"be89c2ae.50e6b","name":"get on/off command LED 2 C1","func":"msg.payload = msg.payload.LightStatus2C1\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":380,"wires":[["16f53b89.010894","6f360c.44f159f4"]]},{"id":"16f53b89.010894","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":810,"y":460,"wires":[]},{"id":"6f360c.44f159f4","type":"ibmiot out","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"gwid-gw-zhiwei","deviceType":"gw-zhiwei","eventCommandType":"LED2C1","format":"json","data":"{}","qos":0,"name":"Light Control","service":"registered","x":870,"y":400,"wires":[]},{"id":"da623213.309a9","type":"template","z":"be89c2ae.50e6b","name":"Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<head>\n\t<meta name=\"viewport\" content=\"width=320, initial-scale=1\">\n  <title>Web Portal | Classroom 1 (Zhi Wei)</title>\n  <link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\">\n<style>\n#lightcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-left: 30px;\nfloat: left;\nwidth: 45%;\n}\n\n#environmentcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-right: 30px;  \nfloat: right;\nwidth: 45%;\n}\n\nul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    background-color: #333;\n}\n\nli {\n    float: left;\n}\n\nli a {\n    display: block;\n    color: white;\n    border: 1 px solid black;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n}\n\nli a:hover {\n    background-color: #111;\n}\nlabel, input { display:block; }\n    input.text { margin-bottom:12px; width:95%; padding: .4em; }\n    fieldset { padding:0; border:0; margin-top:25px; }\n    h1 { font-size: 1.2em; margin: .6em 0; }\n    div#users-contain { width: 350px; margin: 20px 0; }\n    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }\n    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }\n    .ui-dialog .ui-state-error { padding: .3em; }\n    .validateTips { border: 1px solid transparent; padding: 0.3em; }\n\tinput[type=\"time\"]::-webkit-clear-button {\n\t\tdisplay: none;\n\t}\n</style>\n<ul>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_zw\">Classroom 1 (Zhi Wei)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_gabby\">Classroom 2 (Gabby)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/chat\">CHAT</a></li>\n</ul>\n<script src=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\n  <script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\n  <script>\n  $( function() {\n    var dialog, form;\n\t\n \n    function addtime() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tvar time = document.getElementById(\"time\").value;\n\t\t\n\t\tif(d.getHours()<10){\n\t\t    n = \"0\"+d.getHours();\n\t\t}\n\t\tif(d.getMinutes()<10){\n\t\t    m = \"0\"+d.getMinutes();\n\t\t}\n\t\t\n\t\tvar tempTime = n+\":\"+m;\n\t\tif(tempTime>=time){\n\t\t\talert(\"error! The end time cannot be smaller or same as the current time\");\n\t\t}else{\n\t\t\talert(\"time added \" + time);\n\t\t\tdialog.dialog( \"close\" );\n\t\t\tcountdownTimer(tempTime,time);\n\t\t}\n\t\t\n    }\n\t\n\tfunction countdownTimer(tempTime,time){\n\t\tvar tempArr = tempTime.split(\":\");\n\t\tvar timeArr = time.split(\":\");\n\t\t\n\t\tvar hour1 = parseInt(tempArr[0]);\n\t\tvar hour2 = parseInt(timeArr[0]);\n\t\tvar min1 = parseInt(tempArr[1]);\n\t\tvar min2 = parseInt(timeArr[1]);\n\t\tvar leftovermin = 0;\n\t\t\n\t\tvar leftoverHour = (hour2 - hour1)*60;\n\t\t\n\t\tif(min1 == min2){\n\t\t\tleftovermin = min1;\n\t\t}else if(min2 < min1){\n\t\t\tleftovermin = (60 - min1) + min2;\n\t\t}else if(min2 > min1){\n\t\t\tleftovermin = min2 - min1;\n\t\t}\n\t\t\n\t\tvar finaltime = (leftoverHour + leftovermin)*60;\n\t\tloopTime(finaltime);\n\t}\n\t\n\tfunction loopTime(finaltime){\t\t\n\t\tvar setTime = setInterval(function(){\n\t\t\tfinaltime--;\n\t\t\tdocument.getElementById(\"countdown\").innerHTML = \"<p>Countdown: \"+ finaltime + \" second left.</p>\";\n\t\t\tif(finaltime<1){\n\t\t\t\tclearInterval(setTime);\n\t\t\t\t$.post(\"/classroom_zw\",\n\t\t\t\t{\n\t\t\t\t\tLightStatus1C1: \"0\",\n\t\t\t\t\tLightStatus2C1: \"0\"\n\t\t\t\t},\n\t\t\t\tfunction(data, status){\n\t\t\t\t\t//alert(\"Data: \" + data + \"\\nStatus: \" + status);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t},1000);\n\n\t}\n \n    dialog = $( \"#dialog-form\" ).dialog({\n      autoOpen: false,\n      height: 250,\n      width: 350,\n      modal: true,\n      buttons: {\n        \"Add timing\": addtime,\n        Cancel: function() {\n          dialog.dialog( \"close\" );\n        }\n      },\n      close: function() {\n\t\tdialog.dialog( \"close\" );\n      }\n    });\n \n    $( \"#addtime\" ).button().on( \"click\", function() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tdocument.getElementById(\"time\").value = n+\":\"+m;\n\t\tdocument.getElementById(\"time\").min = n+\":\"+m;\n\t\tdialog.dialog( \"open\" );\n    });\n  } );\n  </script>\n</head>\n\n<body>\n  <div id=\"header\"> \n\t<h1 align=\"center\"> WELCOME! </h1>\n\t<h1 align=\"center\"style=\"color:red;\">Singapore Poly Smart Classroom System </b></h1>\n\t<h1 align=\"center\"> Classroom 1 (Zhi Wei)</h2>\n\t</div>\n\t<div>\n    <div id=\"lightcontrol\">\n\t <h2 align=\"center\"> Light Control </h2>\n\t \n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFOklEQVR4Xu2cX2hbdRTHvyfpOpgTlDmdY6gDpcwusdobW33UB30fwwelQxwMhrNJcUUEUYYv1eFNGQrOMYZ/hoivvijog8qcTVq8SUcfpky2CjKdkznrTHOPpA5dS9b+lpyce6+evvZ3v+ec7+f+ft+bpA0hQT9bpp65Kx12DVAY9hPhAYAGmrfPx5lxDCmUmOtfVb0D3yZlTIp7o73TL3Wn584PMTBCoC0t9ctcBdH+Vbh4tOwdrLWkoXRRbIH0zIxe3/3bpd1gKhDRLUJ+zIJ4/7lL9OaZB/05IU1RmdgB6Z3evTY1tzqPhR2BG0Wn/UeMz4agsfN/4o24gYkVkK3l4SyF9BERbeoMiMWqDJxkzD8ap4yJDZCt5eHHUpx6XwPElTWYcYERbqvmxj/Rrt2sXiyAZMuF55n5ZQJF0w9znYmGKp5/NGoo0RhwxdSZUv4FAu2L2oiF+hzuCHLjb0fZS6RAMuXCk8Q4HKUBS2uHwCNVz/84qp4iA5ItDQ8A9DlAq6Ia/ip1fw1DylTvf+10FH1FAqRvKn9DvY4TBLo1iqFXqsngoOIV71lpXSd+HwmQbCn/FkA7OzGQmCZhNOj3XxXTcxRSB3L3xMi9XcSTjv1Ft4wx93t6/vaT9x04q9mEOpBMqfABAds1h2y1FgP7Kp7/YqvXt3KdKpDsN89uRq3+XSuNRnTNT4Hnr9esrQokM5EfI6JRzQHbrcXET1T6i++1q+N6vSqQbKnQOI9vcm0uJus+Czz/Ia1e1IBkyyODYD6mNZhUHQbCC+t+ue7U5iN/SGkup6MIpLAXjFc0hhKvQfxw0F/8VFy3iaAekInChyBs0xhKugYjfK7ijY9J6zbTUwOSmcjPEFGPxlDiNZjfCXLFIXHdSHdIqcAaA3WmBh8PvOJgZ7QXq+rsEN6ezpY3zWsM1KEa3weef0eHtBfJGhA3ly8Gnr/WbWl7q3SAAMgm+sgCAs9X8UqlSOOeMSBuO8eAuPlkO8TRJ7VldmSpWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS26j8HRM25hBdSe+sk4T6ptW9A1Kx2K2RA3HxSWyUKpPfrvRtSqdohMAaJaJ3aFBEUYuafAXw5l67vlPz7XzEgCzBofooIGyLwJ7KSzDgdrkHfdK9/TqIJMSCZUv5dAj0u0VTSNJj5YCVX3CXRtySQH+L6DzgSRi2n0dgllZx/m0QdMSBJ/4i2XTOlXjgakHZJXL7egAgZKSVjQKScFNIxIEJGSskYECknhXQMiJCRUjIGRMpJIR0DImSklIwBkXJSSMeACBkpJWNApJwU0okhkPwsQBuF5kuazGzg+SLfEyn2XlamVDhCwI6kOSnRLzMfruSKT0loiQG5c3LP+jVhVxXAzRKNJUWDmc/UwlrfzMDrjU8Q2/4RA9LopGfy6Y3d9a5DIBrs3Hfutj2ziMDCR7hEX/DqcFc1M/6jiCgAUSBSTf2fdQxIzOgbEAMSMwdi1k5sdsjSz+SlXmhdzW/teq7cDchlpzp9AxiQFRywHRIzgwyIAXE6tSxDLEOa3yjaR4h2PaftEae3TrQN0q5nQGKWWQbEgLjeA5YhyzllT1n2lGU7xHZIEwfsKStmIWtADIjTU4+FuoW6hbqFuoW603G5aJF2yGrXc3XEMsQyxDLEMsQyxPXE/Hed9pmuXc/VEcsQyxDLEMsQyxDXE9MyZKlTliGWIZYhliGWIZYh1+7A31dYhliGWIZYhliGXPsJqv3eknY9V0f+Au1rn4N1gEBhAAAAAElFTkSuQmCC\">\n\n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFNklEQVR4Xu2cX2hbZRjGnzdh9WJRJ3MmJ4h/LkRE1IpoO08GQy9cmziEUbxQOsTBwCsdOEQQYXhT9VpQxxD/DBGvJMfiRB3upLHiFGQML1SQuSRtXUV0tNicvJJZ/NOm+qV9854TfXv9ned93+eX73tOTpMQ+uhvtjR0XZPTQwDdRqDtIAx1bJ8xzeBqmvAZIv4kOzn1Tb+MSUlvlMduHJg5v2WciQ6AcMO6+mU+BeD5XGPxKJ08ubQuDaWLEgtkbrd/cTOiR0D8GEBZCT+Y+WwbjDffepGq1QUJTWmNxAGZ3bkz08w0HwXjABEukx74gh5jDsBEbj56IWlgEgVkZteOm6M0B0S4sicgVony16mIdyUpYxIDpFHy72fQmzog/lqFf061sCf7buV9/dqrKyYCSK3oP0nAMyCKq5+IwOO5cuVo3FDiMuCPuetF/ykQHYrbiOX6e71y+GqcvcQKpF668yEgdSROA1bWTqF1T7Y8dSyunmID0hgtDDHxCRBtimv4Nd5U/jSwlLpp67GPz8TRVyxAfrxvcMviUuY0CF4cQzvU/NIrh7c4rBNfEguQWsl/mUD7xKcRFeSDXrnynKikg5g6kNmR7bdG6fTnDr3FuoTBCxSlrvYmT7TfRKr9qQOpFwtvgTCmNuFGCjEf8oLK0xuR6PZaVSCNe++4lnng226bjGs9Az/ky+E2zfqqQOqjhQmkcFBzwI3WSoEfzJYrb2xUx/V6VSC1UmGOgMtdm0vEOuaPvKByl1YvakAaI/4wp6mqNZhcHW7lftm0mY4fX5TTXFtJDUi95D8O0LMaQ0nXoKh1d25y6kNp3U56mkDeBmiPxlDiNRhPeEE4Ia7bQVANSK3kf0Wg6zWG6kGN17xyON4D3VWSakDqpQJrDNSTGoxpLwiHe6K9QlQFCI8h3VgoNDUG6kkN5u+8oHJNT7QNyDpsZZz3gjCzjiu7vkRlh7S76usjC4BXDlW8UiliQNw3igFx9Mp2iKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWsv+c0C0jOv3OmqPTvrdKK3+DYiW0451DIijUVrLRIHMjt6ei+iiw0w8TKCtWkPEUYfB54hRQSu1T/Lzv2JAlmF8AUIuDoPiqsnAmc1L0eCl71XnJXoQA1Ir+q8T0QMSTfWbBjNeygfhfom+xYDUi4Vagr+AI+HVmhrtXZIvh1dJFJED0s8f8xFwUuqNowERgNGWMCBCRkrJGBApJ4V0DIiQkVIyBkTKSSEdAyJkpJSMAZFyUkjHgAgZKSVjQKScFNIxIEJGSskYECknhXQSCMQ/C1BeaL6+kmn/2mk+qIj8TqTcs6yi/wqI9vaVk1LNMo54QfiwhJwckJEd25BunQLoConG+kWDGd9nFn8dvOSDT89J9CwGpN3M3G4/32zhMDMN9+w3dyWmFtBo/wsXjDCdbu7PvjM9IyB5QUIUiFRT/2cdA5Iw+gbEgCTMgYS1k5gdsvJ77FJvtNbyW7ueK3cDsuxUr18ABuRfHLAdkjCDDIgBcTq1LEMsQzq/ULSPEO16TtsjSY9OtA3SrmdAEpZZBsSAuL4GLEP+ySm7y7K7LNshtkM6OGB3WQkLWQNiQJzueizULdQt1C3ULdSdjsu/LdIOWe16ro5YhliGWIZYhliGuJ6Yf67TPtO167k6YhliGWIZYhliGeJ6YlqGrHTKMsQyxDLEMsQyxDKkewd+v8IyxDLEMsQyxDKk+xNU+9mSdj1XR34DCvWbg+CsTnMAAAAASUVORK5CYII=\">\n<form action=\"/classroom_zw\" method=\"post\">\n      <h1>Control the Lights Below:</h1>\n      <label for=\"LightStatus1C1\">Light 1 (Green):</label>\n      <select name=\"LightStatus1C1\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n <label for=\"LightStatus2C1\">Light 2 (Red):</label>\n      <select name=\"LightStatus2C1\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n      <input type=\"submit\" />\n\t  </form>\n\t \n\t </div>\n\t </div>\n<div id=\"environmentcontrol\">\n    <h2 align=\"center\"> Classroom Environment </h2>\n<br/>\n<!-- Light On icon by Icons8 -->\n<span></span><img class=\"icon icons8-Light-On\" width=\"50\" height=\"50\" src=\"data:image/png;base64,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\"><text>Current Light Value: </text><a href=\"http://169.254.134.247:1880/sensors/light\">View</a> </span>\n\n<br/><br/>\n\n<div id=\"dialog-form\" title=\"Add timing\">\n \n  <form>\n    <fieldset>\n      <label for=\"time\">Time end</label>\n      <input type=\"time\" name=\"time\" id=\"time\" class=\"text ui-widget-content ui-corner-all\">\n \n      <!-- Allow form submission with keyboard without duplicating the dialog button -->\n      <input type=\"submit\" tabindex=\"-1\" style=\"position:absolute; top:-1000px\">\n    </fieldset>\n  </form>\n</div>\n \n \n\n<button id=\"addtime\">Add timing</button><div id=\"countdown\">Countdown: 0 second left.</div>\n\n</div>\n    \n</div>\n</body>\n\n<script type=\"text/javascript\">\n  \n\n</script>\n\n<style type=\"text/css\">\n\t* {\n\t  font-family: \"Palatino Linotype\", \"Book Antiqua\", Palatino, serif;\n\t  font-style: italic;\n\t  font-size: 24px;\n\t}\n\n\thtml, body, #wrapper {\n   margin: 0;\n   padding: 0;\n   height: 100%;\n  }\n\n\t#wrapper {\n    background-color: #ecf0f1;\n  }\n\n\n\n\n  .content {\n    width: 70%;\n    margin: 0 auto;\n  }\n\n  input[type=\"text\"],\n  input[type=\"button\"] {\n    border: 0;\n    color: #fff;\n  }\n\n  input[type=\"text\"] {\n    background-color: #146EA8;\n    padding: 3px 10px;\n  }\n\n  input[type=\"button\"] {\n    background-color: #f39c12;\n    border-right: 2px solid #e67e22;\n    border-bottom: 2px solid #e67e22;\n    min-width: 70px;\n    display: inline-block;\n  }\n\n  input[type=\"button\"]:hover {\n    background-color: #e67e22;\n    border-right: 2px solid #f39c12;\n    border-bottom: 2px solid #f39c12;\n    cursor: pointer;\n  }\n\n  .system,\n  .username {\n    color: #aaa;\n    font-style: italic;\n    font-family: monospace;\n    font-size: 16px;\n  }\n\n  @media(max-width: 1000px) {\n    .content { width: 90%; }\n  }\n\n  @media(max-width: 780px) {\n    #footer { height: 91px; }\n    #chat_box { padding-bottom: 91px; }\n\n    #user { width: 100%; }\n    #message { width: 80%; }\n  }\n\n  @media(max-width: 400px) {\n    #footer { height: 135px; }\n    #chat_box { padding-bottom: 135px; }\n\n    #message { width: 100%; }\n    #send_btn {\n      position: relative;\n      margin-top: 3px;\n      width: 100%;\n    }\n  }\n</style>","x":520,"y":80,"wires":[["ed33ba60.65d2b8"]]},{"id":"ed33ba60.65d2b8","type":"http response","z":"be89c2ae.50e6b","name":"","x":690,"y":80,"wires":[]},{"id":"f89ffa6f.de35b8","type":"http in","z":"be89c2ae.50e6b","name":"classroom 1 (Zhi Wei)","url":"/classroom_zw","method":"get","upload":false,"swaggerDoc":"","x":180,"y":80,"wires":[["452989d8.6d8ed8"]]},{"id":"227ab9e7.49fd56","type":"template","z":"be89c2ae.50e6b","name":"Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<head>\n\t<meta name=\"viewport\" content=\"width=320, initial-scale=1\">\n  <title>Web Portal | Classroom 2 (Gabby)</title>\n  <link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\">\n<style>\n#lightcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-left: 30px;\nfloat: left;\nwidth: 45%;\n}\n\n#environmentcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-right: 30px;  \nfloat: right;\nwidth: 45%;\n}\n\nul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    background-color: #333;\n}\n\nli {\n    float: left;\n}\n\nli a {\n    display: block;\n    color: white;\n    border: 1 px solid black;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n}\n\nli a:hover {\n    background-color: #111;\n}\nlabel, input { display:block; }\n    input.text { margin-bottom:12px; width:95%; padding: .4em; }\n    fieldset { padding:0; border:0; margin-top:25px; }\n    h1 { font-size: 1.2em; margin: .6em 0; }\n    div#users-contain { width: 350px; margin: 20px 0; }\n    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }\n    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }\n    .ui-dialog .ui-state-error { padding: .3em; }\n    .validateTips { border: 1px solid transparent; padding: 0.3em; }\n\tinput[type=\"time\"]::-webkit-clear-button {\n\t\tdisplay: none;\n\t}\n</style>\n<ul>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_zw\">Classroom 1 (Zhi Wei)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_gabby\">Classroom 2 (Gabby)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/chat\">CHAT</a></li>\n</ul>\n<script src=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\n  <script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\n  <script>\n  $( function() {\n    var dialog, form;\n\t\n \n    function addtime() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tvar time = document.getElementById(\"time\").value;\n\t\t\n\t\tif(d.getHours()<10){\n\t\t    n = \"0\"+d.getHours();\n\t\t}\n\t\tif(d.getMinutes()<10){\n\t\t    m = \"0\"+d.getMinutes();\n\t\t}\n\t\t\n\t\tvar tempTime = n+\":\"+m;\n\t\tif(tempTime>=time){\n\t\t\talert(\"error! The end time cannot be smaller or same as the current time\");\n\t\t}else{\n\t\t\talert(\"time added \" + time);\n\t\t\tdialog.dialog( \"close\" );\n\t\t\tcountdownTimer(tempTime,time);\n\t\t}\n\t\t\n    }\n\t\n\tfunction countdownTimer(tempTime,time){\n\t\tvar tempArr = tempTime.split(\":\");\n\t\tvar timeArr = time.split(\":\");\n\t\t\n\t\tvar hour1 = parseInt(tempArr[0]);\n\t\tvar hour2 = parseInt(timeArr[0]);\n\t\tvar min1 = parseInt(tempArr[1]);\n\t\tvar min2 = parseInt(timeArr[1]);\n\t\tvar leftovermin = 0;\n\t\t\n\t\tvar leftoverHour = (hour2 - hour1)*60;\n\t\t\n\t\tif(min1 == min2){\n\t\t\tleftovermin = min1;\n\t\t}else if(min2 < min1){\n\t\t\tleftovermin = (60 - min1) + min2;\n\t\t}else if(min2 > min1){\n\t\t\tleftovermin = min2 - min1;\n\t\t}\n\t\t\n\t\tvar finaltime = (leftoverHour + leftovermin)*60;\n\t\tloopTime(finaltime);\n\t}\n\t\n\tfunction loopTime(finaltime){\t\t\n\t\tvar setTime = setInterval(function(){\n\t\t\tfinaltime--;\n\t\t\tdocument.getElementById(\"countdown\").innerHTML = \"<p>Countdown: \"+ finaltime + \" second left.</p>\";\n\t\t\tif(finaltime<1){\n\t\t\t\tclearInterval(setTime);\n\t\t\t\t$.post(\"/classroom_zw\",\n\t\t\t\t{\n\t\t\t\t\tLightStatus1C1: \"0\",\n\t\t\t\t\tLightStatus2C1: \"0\"\n\t\t\t\t},\n\t\t\t\tfunction(data, status){\n\t\t\t\t\t//alert(\"Data: \" + data + \"\\nStatus: \" + status);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t},1000);\n\n\t}\n \n    dialog = $( \"#dialog-form\" ).dialog({\n      autoOpen: false,\n      height: 250,\n      width: 350,\n      modal: true,\n      buttons: {\n        \"Add timing\": addtime,\n        Cancel: function() {\n          dialog.dialog( \"close\" );\n        }\n      },\n      close: function() {\n\t\tdialog.dialog( \"close\" );\n      }\n    });\n \n    $( \"#addtime\" ).button().on( \"click\", function() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tdocument.getElementById(\"time\").value = n+\":\"+m;\n\t\tdocument.getElementById(\"time\").min = n+\":\"+m;\n\t\tdialog.dialog( \"open\" );\n    });\n  } );\n  </script>\n</head>\n\n<body>\n  <div id=\"header\"> \n\t<h1 align=\"center\"> WELCOME! </h1>\n\t<h1 align=\"center\"style=\"color:red;\">Singapore Poly Smart Classroom System </b></h1>\n\t<h1 align=\"center\"> Classroom 2 (Gabby)</h2>\n\t</div>\n\t<div>\n    <div id=\"lightcontrol\">\n\t <h2 align=\"center\"> Light Control </h2>\n\t \n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFOklEQVR4Xu2cX2hbdRTHvyfpOpgTlDmdY6gDpcwusdobW33UB30fwwelQxwMhrNJcUUEUYYv1eFNGQrOMYZ/hoivvijog8qcTVq8SUcfpky2CjKdkznrTHOPpA5dS9b+lpyce6+evvZ3v+ec7+f+ft+bpA0hQT9bpp65Kx12DVAY9hPhAYAGmrfPx5lxDCmUmOtfVb0D3yZlTIp7o73TL3Wn584PMTBCoC0t9ctcBdH+Vbh4tOwdrLWkoXRRbIH0zIxe3/3bpd1gKhDRLUJ+zIJ4/7lL9OaZB/05IU1RmdgB6Z3evTY1tzqPhR2BG0Wn/UeMz4agsfN/4o24gYkVkK3l4SyF9BERbeoMiMWqDJxkzD8ap4yJDZCt5eHHUpx6XwPElTWYcYERbqvmxj/Rrt2sXiyAZMuF55n5ZQJF0w9znYmGKp5/NGoo0RhwxdSZUv4FAu2L2oiF+hzuCHLjb0fZS6RAMuXCk8Q4HKUBS2uHwCNVz/84qp4iA5ItDQ8A9DlAq6Ia/ip1fw1DylTvf+10FH1FAqRvKn9DvY4TBLo1iqFXqsngoOIV71lpXSd+HwmQbCn/FkA7OzGQmCZhNOj3XxXTcxRSB3L3xMi9XcSTjv1Ft4wx93t6/vaT9x04q9mEOpBMqfABAds1h2y1FgP7Kp7/YqvXt3KdKpDsN89uRq3+XSuNRnTNT4Hnr9esrQokM5EfI6JRzQHbrcXET1T6i++1q+N6vSqQbKnQOI9vcm0uJus+Czz/Ia1e1IBkyyODYD6mNZhUHQbCC+t+ue7U5iN/SGkup6MIpLAXjFc0hhKvQfxw0F/8VFy3iaAekInChyBs0xhKugYjfK7ijY9J6zbTUwOSmcjPEFGPxlDiNZjfCXLFIXHdSHdIqcAaA3WmBh8PvOJgZ7QXq+rsEN6ezpY3zWsM1KEa3weef0eHtBfJGhA3ly8Gnr/WbWl7q3SAAMgm+sgCAs9X8UqlSOOeMSBuO8eAuPlkO8TRJ7VldmSpWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS26j8HRM25hBdSe+sk4T6ptW9A1Kx2K2RA3HxSWyUKpPfrvRtSqdohMAaJaJ3aFBEUYuafAXw5l67vlPz7XzEgCzBofooIGyLwJ7KSzDgdrkHfdK9/TqIJMSCZUv5dAj0u0VTSNJj5YCVX3CXRtySQH+L6DzgSRi2n0dgllZx/m0QdMSBJ/4i2XTOlXjgakHZJXL7egAgZKSVjQKScFNIxIEJGSskYECknhXQMiJCRUjIGRMpJIR0DImSklIwBkXJSSMeACBkpJWNApJwU0okhkPwsQBuF5kuazGzg+SLfEyn2XlamVDhCwI6kOSnRLzMfruSKT0loiQG5c3LP+jVhVxXAzRKNJUWDmc/UwlrfzMDrjU8Q2/4RA9LopGfy6Y3d9a5DIBrs3Hfutj2ziMDCR7hEX/DqcFc1M/6jiCgAUSBSTf2fdQxIzOgbEAMSMwdi1k5sdsjSz+SlXmhdzW/teq7cDchlpzp9AxiQFRywHRIzgwyIAXE6tSxDLEOa3yjaR4h2PaftEae3TrQN0q5nQGKWWQbEgLjeA5YhyzllT1n2lGU7xHZIEwfsKStmIWtADIjTU4+FuoW6hbqFuoW603G5aJF2yGrXc3XEMsQyxDLEMsQyxPXE/Hed9pmuXc/VEcsQyxDLEMsQyxDXE9MyZKlTliGWIZYhliGWIZYh1+7A31dYhliGWIZYhliGXPsJqv3eknY9V0f+Au1rn4N1gEBhAAAAAElFTkSuQmCC\">\n\n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFNklEQVR4Xu2cX2hbZRjGnzdh9WJRJ3MmJ4h/LkRE1IpoO08GQy9cmziEUbxQOsTBwCsdOEQQYXhT9VpQxxD/DBGvJMfiRB3upLHiFGQML1SQuSRtXUV0tNicvJJZ/NOm+qV9854TfXv9ned93+eX73tOTpMQ+uhvtjR0XZPTQwDdRqDtIAx1bJ8xzeBqmvAZIv4kOzn1Tb+MSUlvlMduHJg5v2WciQ6AcMO6+mU+BeD5XGPxKJ08ubQuDaWLEgtkbrd/cTOiR0D8GEBZCT+Y+WwbjDffepGq1QUJTWmNxAGZ3bkz08w0HwXjABEukx74gh5jDsBEbj56IWlgEgVkZteOm6M0B0S4sicgVony16mIdyUpYxIDpFHy72fQmzog/lqFf061sCf7buV9/dqrKyYCSK3oP0nAMyCKq5+IwOO5cuVo3FDiMuCPuetF/ykQHYrbiOX6e71y+GqcvcQKpF668yEgdSROA1bWTqF1T7Y8dSyunmID0hgtDDHxCRBtimv4Nd5U/jSwlLpp67GPz8TRVyxAfrxvcMviUuY0CF4cQzvU/NIrh7c4rBNfEguQWsl/mUD7xKcRFeSDXrnynKikg5g6kNmR7bdG6fTnDr3FuoTBCxSlrvYmT7TfRKr9qQOpFwtvgTCmNuFGCjEf8oLK0xuR6PZaVSCNe++4lnng226bjGs9Az/ky+E2zfqqQOqjhQmkcFBzwI3WSoEfzJYrb2xUx/V6VSC1UmGOgMtdm0vEOuaPvKByl1YvakAaI/4wp6mqNZhcHW7lftm0mY4fX5TTXFtJDUi95D8O0LMaQ0nXoKh1d25y6kNp3U56mkDeBmiPxlDiNRhPeEE4Ia7bQVANSK3kf0Wg6zWG6kGN17xyON4D3VWSakDqpQJrDNSTGoxpLwiHe6K9QlQFCI8h3VgoNDUG6kkN5u+8oHJNT7QNyDpsZZz3gjCzjiu7vkRlh7S76usjC4BXDlW8UiliQNw3igFx9Mp2iKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWsv+c0C0jOv3OmqPTvrdKK3+DYiW0451DIijUVrLRIHMjt6ei+iiw0w8TKCtWkPEUYfB54hRQSu1T/Lzv2JAlmF8AUIuDoPiqsnAmc1L0eCl71XnJXoQA1Ir+q8T0QMSTfWbBjNeygfhfom+xYDUi4Vagr+AI+HVmhrtXZIvh1dJFJED0s8f8xFwUuqNowERgNGWMCBCRkrJGBApJ4V0DIiQkVIyBkTKSSEdAyJkpJSMAZFyUkjHgAgZKSVjQKScFNIxIEJGSskYECknhXQSCMQ/C1BeaL6+kmn/2mk+qIj8TqTcs6yi/wqI9vaVk1LNMo54QfiwhJwckJEd25BunQLoConG+kWDGd9nFn8dvOSDT89J9CwGpN3M3G4/32zhMDMN9+w3dyWmFtBo/wsXjDCdbu7PvjM9IyB5QUIUiFRT/2cdA5Iw+gbEgCTMgYS1k5gdsvJ77FJvtNbyW7ueK3cDsuxUr18ABuRfHLAdkjCDDIgBcTq1LEMsQzq/ULSPEO16TtsjSY9OtA3SrmdAEpZZBsSAuL4GLEP+ySm7y7K7LNshtkM6OGB3WQkLWQNiQJzueizULdQt1C3ULdSdjsu/LdIOWe16ro5YhliGWIZYhliGuJ6Yf67TPtO167k6YhliGWIZYhliGeJ6YlqGrHTKMsQyxDLEMsQyxDKkewd+v8IyxDLEMsQyxDKk+xNU+9mSdj1XR34DCvWbg+CsTnMAAAAASUVORK5CYII=\">\n<form action=\"/classroom_gabby\" method=\"post\">\n      <h1>Control the Lights Below:</h1>\n      <label for=\"LightStatus1C2\">Light 1 (Green):</label>\n      <select name=\"LightStatus1C2\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n <label for=\"LightStatus2C2\">Light 2 (Red):</label>\n      <select name=\"LightStatus2C2\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n      <input type=\"submit\" />\n\t  </form>\n\t \n\t </div>\n\t </div>\n<div id=\"environmentcontrol\">\n    <h2 align=\"center\"> Classroom Environment </h2>\n\n<br/>\n\n<!-- Light On icon by Icons8 -->\n<span><img class=\"icon icons8-Light-On\" width=\"50\" height=\"50\" src=\"data:image/png;base64,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\"><text>Current Light Value:</text><a href=\"http://169.254.134.247:1880/sensors/light\">View</a> </span>\n\n<br/><br/>\n\n<div id=\"dialog-form\" title=\"Add timing\">\n \n  <form>\n    <fieldset>\n      <label for=\"time\">Time end</label>\n      <input type=\"time\" name=\"time\" id=\"time\" class=\"text ui-widget-content ui-corner-all\">\n \n      <!-- Allow form submission with keyboard without duplicating the dialog button -->\n      <input type=\"submit\" tabindex=\"-1\" style=\"position:absolute; top:-1000px\">\n    </fieldset>\n  </form>\n</div>\n \n \n\n<button id=\"addtime\">Add timing</button><div id=\"countdown\">Countdown: 0 second left.</div>\n\n</div>\n\n  </div>\n</body>\n\n<script type=\"text/javascript\">\n  \n\n</script>\n\n<style type=\"text/css\">\n\t* {\n\t  font-family: \"Palatino Linotype\", \"Book Antiqua\", Palatino, serif;\n\t  font-style: italic;\n\t  font-size: 24px;\n\t}\n\n\thtml, body, #wrapper {\n   margin: 0;\n   padding: 0;\n   height: 100%;\n  }\n\n\t#wrapper {\n    background-color: #ecf0f1;\n  }\n\n  .content {\n    width: 70%;\n    margin: 0 auto;\n  }\n\n  input[type=\"text\"],\n  input[type=\"button\"] {\n    border: 0;\n    color: #fff;\n  }\n\n  input[type=\"text\"] {\n    background-color: #146EA8;\n    padding: 3px 10px;\n  }\n\n  input[type=\"button\"] {\n    background-color: #f39c12;\n    border-right: 2px solid #e67e22;\n    border-bottom: 2px solid #e67e22;\n    min-width: 70px;\n    display: inline-block;\n  }\n\n  input[type=\"button\"]:hover {\n    background-color: #e67e22;\n    border-right: 2px solid #f39c12;\n    border-bottom: 2px solid #f39c12;\n    cursor: pointer;\n  }\n\n  .system,\n  .username {\n    color: #aaa;\n    font-style: italic;\n    font-family: monospace;\n    font-size: 16px;\n  }\n\n  @media(max-width: 1000px) {\n    .content { width: 90%; }\n  }\n\n  @media(max-width: 780px) {\n    #footer { height: 91px; }\n    #chat_box { padding-bottom: 91px; }\n\n    #user { width: 100%; }\n    #message { width: 80%; }\n  }\n\n  @media(max-width: 400px) {\n    #footer { height: 135px; }\n    #chat_box { padding-bottom: 135px; }\n\n    #message { width: 100%; }\n    #send_btn {\n      position: relative;\n      margin-top: 3px;\n      width: 100%;\n    }\n  }\n</style>","x":500,"y":700,"wires":[["586dbe9c.b482e"]]},{"id":"586dbe9c.b482e","type":"http response","z":"be89c2ae.50e6b","name":"","x":670,"y":700,"wires":[]},{"id":"db6a3a54.223138","type":"http in","z":"be89c2ae.50e6b","name":"classroom 2 (Gabby)","url":"/classroom_gabby","method":"post","swaggerDoc":"","x":230,"y":700,"wires":[["227ab9e7.49fd56","3ac55cb4.877974","59c5f99.041cf08","47dc0bac.d523a4"]]},{"id":"7865081a.18b278","type":"ibmiot out","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"gwid-gw-gabby","deviceType":"gw-gabby","eventCommandType":"LED1C2","format":"json","data":"{}","qos":0,"name":"Light Control","service":"registered","x":730,"y":760,"wires":[]},{"id":"3ac55cb4.877974","type":"function","z":"be89c2ae.50e6b","name":"get on/off command LED 1 C2","func":"msg.payload = msg.payload.LightStatus1C2\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":820,"wires":[["7865081a.18b278","94293432.8c0118"]]},{"id":"94293432.8c0118","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":790,"y":820,"wires":[]},{"id":"59c5f99.041cf08","type":"debug","z":"be89c2ae.50e6b","name":"Input","active":true,"console":"false","complete":"payload","x":450,"y":760,"wires":[]},{"id":"47dc0bac.d523a4","type":"function","z":"be89c2ae.50e6b","name":"get on/off command LED 2 C2","func":"msg.payload = msg.payload.LightStatus2C2\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":860,"wires":[["9235749e.543888","fdf2155d.cf9d28"]]},{"id":"9235749e.543888","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":790,"y":920,"wires":[]},{"id":"fdf2155d.cf9d28","type":"ibmiot out","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","outputType":"cmd","deviceId":"gwid-gw-gabby","deviceType":"gw-gabby","eventCommandType":"LED2C2","format":"json","data":"{}","qos":0,"name":"Light Control","service":"registered","x":770,"y":860,"wires":[]},{"id":"a18e3c79.752e4","type":"http in","z":"be89c2ae.50e6b","name":"classroom 2 (Gabby)","url":"/classroom_gabby","method":"get","swaggerDoc":"","x":170,"y":120,"wires":[["72fff09c.a3ed4"]]},{"id":"7a5b9bad.8022b4","type":"template","z":"be89c2ae.50e6b","name":"Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<head>\n\t<meta name=\"viewport\" content=\"width=320, initial-scale=1\">\n  <title>Web Portal | Classroom 2 (Gabby)</title>\n  <link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\">\n<style>\n#lightcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-left: 30px;\nfloat: left;\nwidth: 45%;\n}\n\n#environmentcontrol {\nborder: 1px solid black;\npadding: 10px;\nmargin-right: 30px;  \nfloat: right;\nwidth: 45%;\n}\n\nul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    background-color: #333;\n}\n\nli {\n    float: left;\n}\n\nli a {\n    display: block;\n    color: white;\n    border: 1 px solid black;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n}\n\nli a:hover {\n    background-color: #111;\n}\nlabel, input { display:block; }\n    input.text { margin-bottom:12px; width:95%; padding: .4em; }\n    fieldset { padding:0; border:0; margin-top:25px; }\n    h1 { font-size: 1.2em; margin: .6em 0; }\n    div#users-contain { width: 350px; margin: 20px 0; }\n    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }\n    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }\n    .ui-dialog .ui-state-error { padding: .3em; }\n    .validateTips { border: 1px solid transparent; padding: 0.3em; }\n\tinput[type=\"time\"]::-webkit-clear-button {\n\t\tdisplay: none;\n\t}\n</style>\n<ul>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_zw\">Classroom 1 (Zhi Wei)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/classroom_gabby\">Classroom 2 (Gabby)</a></li>\n  <li><a href=\"http://noname2.eu-gb.mybluemix.net/chat\">CHAT</a></li>\n</ul>\n<script src=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\n  <script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\n  <script>\n  $( function() {\n    var dialog, form;\n\t\n \n    function addtime() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tvar time = document.getElementById(\"time\").value;\n\t\t\n\t\tif(d.getHours()<10){\n\t\t    n = \"0\"+d.getHours();\n\t\t}\n\t\tif(d.getMinutes()<10){\n\t\t    m = \"0\"+d.getMinutes();\n\t\t}\n\t\t\n\t\tvar tempTime = n+\":\"+m;\n\t\tif(tempTime>=time){\n\t\t\talert(\"error! The end time cannot be smaller or same as the current time\");\n\t\t}else{\n\t\t\talert(\"time added \" + time);\n\t\t\tdialog.dialog( \"close\" );\n\t\t\tcountdownTimer(tempTime,time);\n\t\t}\n\t\t\n    }\n\t\n\tfunction countdownTimer(tempTime,time){\n\t\tvar tempArr = tempTime.split(\":\");\n\t\tvar timeArr = time.split(\":\");\n\t\t\n\t\tvar hour1 = parseInt(tempArr[0]);\n\t\tvar hour2 = parseInt(timeArr[0]);\n\t\tvar min1 = parseInt(tempArr[1]);\n\t\tvar min2 = parseInt(timeArr[1]);\n\t\tvar leftovermin = 0;\n\t\t\n\t\tvar leftoverHour = (hour2 - hour1)*60;\n\t\t\n\t\tif(min1 == min2){\n\t\t\tleftovermin = min1;\n\t\t}else if(min2 < min1){\n\t\t\tleftovermin = (60 - min1) + min2;\n\t\t}else if(min2 > min1){\n\t\t\tleftovermin = min2 - min1;\n\t\t}\n\t\t\n\t\tvar finaltime = (leftoverHour + leftovermin)*60;\n\t\tloopTime(finaltime);\n\t}\n\t\n\tfunction loopTime(finaltime){\t\t\n\t\tvar setTime = setInterval(function(){\n\t\t\tfinaltime--;\n\t\t\tdocument.getElementById(\"countdown\").innerHTML = \"<p>Countdown: \"+ finaltime + \" second left.</p>\";\n\t\t\tif(finaltime<1){\n\t\t\t\tclearInterval(setTime);\n\t\t\t\t$.post(\"/classroom_zw\",\n\t\t\t\t{\n\t\t\t\t\tLightStatus1C1: \"0\",\n\t\t\t\t\tLightStatus2C1: \"0\"\n\t\t\t\t},\n\t\t\t\tfunction(data, status){\n\t\t\t\t\t//alert(\"Data: \" + data + \"\\nStatus: \" + status);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t},1000);\n\n\t}\n \n    dialog = $( \"#dialog-form\" ).dialog({\n      autoOpen: false,\n      height: 250,\n      width: 350,\n      modal: true,\n      buttons: {\n        \"Add timing\": addtime,\n        Cancel: function() {\n          dialog.dialog( \"close\" );\n        }\n      },\n      close: function() {\n\t\tdialog.dialog( \"close\" );\n      }\n    });\n \n    $( \"#addtime\" ).button().on( \"click\", function() {\n\t\tvar d = new Date();\n\t\tvar n = d.getHours();\n\t\tvar m = d.getMinutes();\n\t\tdocument.getElementById(\"time\").value = n+\":\"+m;\n\t\tdocument.getElementById(\"time\").min = n+\":\"+m;\n\t\tdialog.dialog( \"open\" );\n    });\n  } );\n  </script>\n</head>\n\n<body>\n  <div id=\"header\"> \n\t<h1 align=\"center\"> WELCOME! </h1>\n\t<h1 align=\"center\"style=\"color:red;\">Singapore Poly Smart Classroom System </b></h1>\n\t<h1 align=\"center\"> Classroom 2 (Gabby)</h2>\n\t</div>\n\t<div>\n    <div id=\"lightcontrol\">\n\t <h2 align=\"center\"> Light Control </h2>\n\t \n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFOklEQVR4Xu2cX2hbdRTHvyfpOpgTlDmdY6gDpcwusdobW33UB30fwwelQxwMhrNJcUUEUYYv1eFNGQrOMYZ/hoivvijog8qcTVq8SUcfpky2CjKdkznrTHOPpA5dS9b+lpyce6+evvZ3v+ec7+f+ft+bpA0hQT9bpp65Kx12DVAY9hPhAYAGmrfPx5lxDCmUmOtfVb0D3yZlTIp7o73TL3Wn584PMTBCoC0t9ctcBdH+Vbh4tOwdrLWkoXRRbIH0zIxe3/3bpd1gKhDRLUJ+zIJ4/7lL9OaZB/05IU1RmdgB6Z3evTY1tzqPhR2BG0Wn/UeMz4agsfN/4o24gYkVkK3l4SyF9BERbeoMiMWqDJxkzD8ap4yJDZCt5eHHUpx6XwPElTWYcYERbqvmxj/Rrt2sXiyAZMuF55n5ZQJF0w9znYmGKp5/NGoo0RhwxdSZUv4FAu2L2oiF+hzuCHLjb0fZS6RAMuXCk8Q4HKUBS2uHwCNVz/84qp4iA5ItDQ8A9DlAq6Ia/ip1fw1DylTvf+10FH1FAqRvKn9DvY4TBLo1iqFXqsngoOIV71lpXSd+HwmQbCn/FkA7OzGQmCZhNOj3XxXTcxRSB3L3xMi9XcSTjv1Ft4wx93t6/vaT9x04q9mEOpBMqfABAds1h2y1FgP7Kp7/YqvXt3KdKpDsN89uRq3+XSuNRnTNT4Hnr9esrQokM5EfI6JRzQHbrcXET1T6i++1q+N6vSqQbKnQOI9vcm0uJus+Czz/Ia1e1IBkyyODYD6mNZhUHQbCC+t+ue7U5iN/SGkup6MIpLAXjFc0hhKvQfxw0F/8VFy3iaAekInChyBs0xhKugYjfK7ijY9J6zbTUwOSmcjPEFGPxlDiNZjfCXLFIXHdSHdIqcAaA3WmBh8PvOJgZ7QXq+rsEN6ezpY3zWsM1KEa3weef0eHtBfJGhA3ly8Gnr/WbWl7q3SAAMgm+sgCAs9X8UqlSOOeMSBuO8eAuPlkO8TRJ7VldmSpWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS2yoCoWe1WyIC4+aS26j8HRM25hBdSe+sk4T6ptW9A1Kx2K2RA3HxSWyUKpPfrvRtSqdohMAaJaJ3aFBEUYuafAXw5l67vlPz7XzEgCzBofooIGyLwJ7KSzDgdrkHfdK9/TqIJMSCZUv5dAj0u0VTSNJj5YCVX3CXRtySQH+L6DzgSRi2n0dgllZx/m0QdMSBJ/4i2XTOlXjgakHZJXL7egAgZKSVjQKScFNIxIEJGSskYECknhXQMiJCRUjIGRMpJIR0DImSklIwBkXJSSMeACBkpJWNApJwU0okhkPwsQBuF5kuazGzg+SLfEyn2XlamVDhCwI6kOSnRLzMfruSKT0loiQG5c3LP+jVhVxXAzRKNJUWDmc/UwlrfzMDrjU8Q2/4RA9LopGfy6Y3d9a5DIBrs3Hfutj2ziMDCR7hEX/DqcFc1M/6jiCgAUSBSTf2fdQxIzOgbEAMSMwdi1k5sdsjSz+SlXmhdzW/teq7cDchlpzp9AxiQFRywHRIzgwyIAXE6tSxDLEOa3yjaR4h2PaftEae3TrQN0q5nQGKWWQbEgLjeA5YhyzllT1n2lGU7xHZIEwfsKStmIWtADIjTU4+FuoW6hbqFuoW603G5aJF2yGrXc3XEMsQyxDLEMsQyxPXE/Hed9pmuXc/VEcsQyxDLEMsQyxDXE9MyZKlTliGWIZYhliGWIZYh1+7A31dYhliGWIZYhliGXPsJqv3eknY9V0f+Au1rn4N1gEBhAAAAAElFTkSuQmCC\">\n\n<!-- LED Diode Filled icon by Icons8 -->\n<img class=\"icon icons8-LED-Diode-Filled\" width=\"220\" height=\"220\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFNklEQVR4Xu2cX2hbZRjGnzdh9WJRJ3MmJ4h/LkRE1IpoO08GQy9cmziEUbxQOsTBwCsdOEQQYXhT9VpQxxD/DBGvJMfiRB3upLHiFGQML1SQuSRtXUV0tNicvJJZ/NOm+qV9854TfXv9ned93+eX73tOTpMQ+uhvtjR0XZPTQwDdRqDtIAx1bJ8xzeBqmvAZIv4kOzn1Tb+MSUlvlMduHJg5v2WciQ6AcMO6+mU+BeD5XGPxKJ08ubQuDaWLEgtkbrd/cTOiR0D8GEBZCT+Y+WwbjDffepGq1QUJTWmNxAGZ3bkz08w0HwXjABEukx74gh5jDsBEbj56IWlgEgVkZteOm6M0B0S4sicgVony16mIdyUpYxIDpFHy72fQmzog/lqFf061sCf7buV9/dqrKyYCSK3oP0nAMyCKq5+IwOO5cuVo3FDiMuCPuetF/ykQHYrbiOX6e71y+GqcvcQKpF668yEgdSROA1bWTqF1T7Y8dSyunmID0hgtDDHxCRBtimv4Nd5U/jSwlLpp67GPz8TRVyxAfrxvcMviUuY0CF4cQzvU/NIrh7c4rBNfEguQWsl/mUD7xKcRFeSDXrnynKikg5g6kNmR7bdG6fTnDr3FuoTBCxSlrvYmT7TfRKr9qQOpFwtvgTCmNuFGCjEf8oLK0xuR6PZaVSCNe++4lnng226bjGs9Az/ky+E2zfqqQOqjhQmkcFBzwI3WSoEfzJYrb2xUx/V6VSC1UmGOgMtdm0vEOuaPvKByl1YvakAaI/4wp6mqNZhcHW7lftm0mY4fX5TTXFtJDUi95D8O0LMaQ0nXoKh1d25y6kNp3U56mkDeBmiPxlDiNRhPeEE4Ia7bQVANSK3kf0Wg6zWG6kGN17xyON4D3VWSakDqpQJrDNSTGoxpLwiHe6K9QlQFCI8h3VgoNDUG6kkN5u+8oHJNT7QNyDpsZZz3gjCzjiu7vkRlh7S76usjC4BXDlW8UiliQNw3igFx9Mp2iKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWssMiJbTjnUMiKNRWsv+c0C0jOv3OmqPTvrdKK3+DYiW0451DIijUVrLRIHMjt6ei+iiw0w8TKCtWkPEUYfB54hRQSu1T/Lzv2JAlmF8AUIuDoPiqsnAmc1L0eCl71XnJXoQA1Ir+q8T0QMSTfWbBjNeygfhfom+xYDUi4Vagr+AI+HVmhrtXZIvh1dJFJED0s8f8xFwUuqNowERgNGWMCBCRkrJGBApJ4V0DIiQkVIyBkTKSSEdAyJkpJSMAZFyUkjHgAgZKSVjQKScFNIxIEJGSskYECknhXQSCMQ/C1BeaL6+kmn/2mk+qIj8TqTcs6yi/wqI9vaVk1LNMo54QfiwhJwckJEd25BunQLoConG+kWDGd9nFn8dvOSDT89J9CwGpN3M3G4/32zhMDMN9+w3dyWmFtBo/wsXjDCdbu7PvjM9IyB5QUIUiFRT/2cdA5Iw+gbEgCTMgYS1k5gdsvJ77FJvtNbyW7ueK3cDsuxUr18ABuRfHLAdkjCDDIgBcTq1LEMsQzq/ULSPEO16TtsjSY9OtA3SrmdAEpZZBsSAuL4GLEP+ySm7y7K7LNshtkM6OGB3WQkLWQNiQJzueizULdQt1C3ULdSdjsu/LdIOWe16ro5YhliGWIZYhliGuJ6Yf67TPtO167k6YhliGWIZYhliGeJ6YlqGrHTKMsQyxDLEMsQyxDKkewd+v8IyxDLEMsQyxDKk+xNU+9mSdj1XR34DCvWbg+CsTnMAAAAASUVORK5CYII=\">\n<form action=\"/classroom_gabby\" method=\"post\">\n      <h1>Control the Lights Below:</h1>\n      <label for=\"LightStatus1C2\">Light 1 (Green):</label>\n      <select name=\"LightStatus1C2\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n <label for=\"LightStatus2C2\">Light 2 (Red):</label>\n      <select name=\"LightStatus2C2\">\n  <option value=\"1\">On</option>\n  <option value=\"0\">Off</option>\n</select>\n      <input type=\"submit\" />\n\t  </form>\n\t \n\t </div>\n\t </div>\n<div id=\"environmentcontrol\">\n    <h2 align=\"center\"> Classroom Environment </h2>\n\n<br/>\n\n<!-- Light On icon by Icons8 -->\n<span><img class=\"icon icons8-Light-On\" width=\"50\" height=\"50\" src=\"data:image/png;base64,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\"><text>Current Light Value:</text><a href=\"http://169.254.134.247:1880/sensors/light\">View</a> </span>\n\n<br/><br/>\n\n<div id=\"dialog-form\" title=\"Add timing\">\n \n  <form>\n    <fieldset>\n      <label for=\"time\">Time end</label>\n      <input type=\"time\" name=\"time\" id=\"time\" class=\"text ui-widget-content ui-corner-all\">\n \n      <!-- Allow form submission with keyboard without duplicating the dialog button -->\n      <input type=\"submit\" tabindex=\"-1\" style=\"position:absolute; top:-1000px\">\n    </fieldset>\n  </form>\n</div>\n \n \n\n<button id=\"addtime\">Add timing</button><div id=\"countdown\">Countdown: 0 second left.</div>\n\n</div>\n\n  </div>\n</body>\n\n<script type=\"text/javascript\">\n  \n\n</script>\n\n<style type=\"text/css\">\n\t* {\n\t  font-family: \"Palatino Linotype\", \"Book Antiqua\", Palatino, serif;\n\t  font-style: italic;\n\t  font-size: 24px;\n\t}\n\n\thtml, body, #wrapper {\n   margin: 0;\n   padding: 0;\n   height: 100%;\n  }\n\n\t#wrapper {\n    background-color: #ecf0f1;\n  }\n\n  .content {\n    width: 70%;\n    margin: 0 auto;\n  }\n\n  input[type=\"text\"],\n  input[type=\"button\"] {\n    border: 0;\n    color: #fff;\n  }\n\n  input[type=\"text\"] {\n    background-color: #146EA8;\n    padding: 3px 10px;\n  }\n\n  input[type=\"button\"] {\n    background-color: #f39c12;\n    border-right: 2px solid #e67e22;\n    border-bottom: 2px solid #e67e22;\n    min-width: 70px;\n    display: inline-block;\n  }\n\n  input[type=\"button\"]:hover {\n    background-color: #e67e22;\n    border-right: 2px solid #f39c12;\n    border-bottom: 2px solid #f39c12;\n    cursor: pointer;\n  }\n\n  .system,\n  .username {\n    color: #aaa;\n    font-style: italic;\n    font-family: monospace;\n    font-size: 16px;\n  }\n\n  @media(max-width: 1000px) {\n    .content { width: 90%; }\n  }\n\n  @media(max-width: 780px) {\n    #footer { height: 91px; }\n    #chat_box { padding-bottom: 91px; }\n\n    #user { width: 100%; }\n    #message { width: 80%; }\n  }\n\n  @media(max-width: 400px) {\n    #footer { height: 135px; }\n    #chat_box { padding-bottom: 135px; }\n\n    #message { width: 100%; }\n    #send_btn {\n      position: relative;\n      margin-top: 3px;\n      width: 100%;\n    }\n  }\n</style>","x":520,"y":120,"wires":[["85590a96.adb4f8"]]},{"id":"85590a96.adb4f8","type":"http response","z":"be89c2ae.50e6b","name":"","x":690,"y":120,"wires":[]},{"id":"b4b71a94.e2ed38","type":"websocket in","z":"be89c2ae.50e6b","name":"","server":"5c4ad63c.548c58","client":"","x":190,"y":1240,"wires":[["209163e4.9740dc"]]},{"id":"209163e4.9740dc","type":"function","z":"be89c2ae.50e6b","name":"","func":"delete msg._session;\nreturn msg;\n\n","outputs":1,"noerr":0,"x":364,"y":1240,"wires":[["95498035.d05e4"]]},{"id":"95498035.d05e4","type":"websocket out","z":"be89c2ae.50e6b","name":"","server":"5c4ad63c.548c58","client":"","x":545,"y":1240,"wires":[]},{"id":"7ef2c01a.27afc","type":"http in","z":"be89c2ae.50e6b","name":"","url":"/chat","method":"get","upload":false,"swaggerDoc":"","x":198,"y":1308,"wires":[["ede1bff4.e7e65"]]},{"id":"ede1bff4.e7e65","type":"template","z":"be89c2ae.50e6b","name":"","field":"","fieldType":"msg","syntax":"mustache","template":"<head>\n  <meta name=\"viewport\" content=\"width=320, initial-scale=1\">\n  <title>Chat</title>\n</head>\n<body>\n  <div id=\"wrapper\">\n    <div id=\"chat_box\" class=\"content\"></div>\n    <div id=\"footer\">\n      <div class=\"content\">\n        <input type=\"text\" id=\"user\" placeholder=\"Who are you?\" />\n        <input type=\"text\" id=\"message\" placeholder=\"What do you want to say?\" />\n        <input type=\"button\" id=\"send_btn\" value=\"Send\" onclick=\"sendMessage()\">\n      </div>\n    </div>\n  </div>\n</body>\n<script type=\"text/javascript\">\n  var wsUri = \"ws://{{req.headers.host}}/ws/chat\";\n  var ws = new WebSocket(wsUri);\n  function createSystemMessage(message) {\n    var message = document.createTextNode(message);\n    var messageBox = document.createElement('p');\n    messageBox.className = 'system';\n    messageBox.appendChild(message);\n    var chat = document.getElementById('chat_box');\n    chat.appendChild(messageBox);\n  }\n  function createUserMessage(user, message) {\n    var user = document.createTextNode(user + ': ');\n    var userBox = document.createElement('span');\n    userBox.className = 'username';\n    userBox.appendChild(user);\n    var message = document.createTextNode(message);\n    var messageBox = document.createElement('p');\n    messageBox.appendChild(userBox);\n    messageBox.appendChild(message);\n    var chat = document.getElementById('chat_box');\n    chat.appendChild(messageBox);\n  }\n  ws.onopen = function(ev) {\n    createSystemMessage('[Connected]');\n  };\n  ws.onclose = function(ev) {\n    createSystemMessage('[Disconnected]');\n  }\n  ws.onmessage = function(ev) {\n    var payload = JSON.parse(ev.data);\n    createUserMessage(payload.user, payload.message);\n    var chat = document.getElementById('chat_box');\n    chat.scrollTop = chat.scrollHeight;\n  }\n  function sendMessage() {\n    var user = document.getElementById('user');\n    var message = document.getElementById('message');\n    var payload = {\n      message: message.value,\n      user: user.value,\n      ts: (new Date()).getTime()\n    };\n    ws.send(JSON.stringify(payload));\n    message.value = \"\";\n  };\n</script>\n<style type=\"text/css\">\n  * {\n    font-family: \"Palatino Linotype\", \"Book Antiqua\", Palatino, serif;\n    font-style: italic;\n    font-size: 24px;\n  }\n  html, body, #wrapper {\n    margin: 0;\n    padding: 0;\n    height: 100%;\n  }\n  #wrapper {\n    background-color: #ecf0f1;\n  }\n  #chat_box {\n    box-sizing: border-box;\n    height: 100%;\n    overflow: auto;\n    padding-bottom: 50px;\n  }\n  #footer {\n    box-sizing: border-box;\n    position: fixed;\n    bottom: 0;\n    height: 50px;\n    width: 100%;\n    background-color: #2980b9;\n  }\n  #footer .content {\n    padding-top: 4px;\n    position: relative;\n  }\n  #user { width: 20%; }\n  #message { width: 68%; }\n  #send_btn {\n    width: 10%;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    margin: 0;\n  }\n  .content {\n    width: 70%;\n    margin: 0 auto;\n  }\n  input[type=\"text\"],\n  input[type=\"button\"] {\n    border: 0;\n    color: #fff;\n  }\n  input[type=\"text\"] {\n    background-color: #146EA8;\n    padding: 3px 10px;\n  }\n  input[type=\"button\"] {\n    background-color: #f39c12;\n    border-right: 2px solid #e67e22;\n    border-bottom: 2px solid #e67e22;\n    min-width: 70px;\n    display: inline-block;\n  }\n  input[type=\"button\"]:hover {\n    background-color: #e67e22;\n    border-right: 2px solid #f39c12;\n    border-bottom: 2px solid #f39c12;\n    cursor: pointer;\n  }\n  .system,\n  .username {\n    color: #aaa;\n    font-style: italic;\n    font-family: monospace;\n    font-size: 16px;\n  }\n  @media(max-width: 1000px) {\n    .content { width: 90%; }\n  }\n  @media(max-width: 780px) {\n    #footer { height: 91px; }\n    #chat_box { padding-bottom: 91px; }\n    #user { width: 100%; }\n    #message { width: 80%; }\n  }\n  @media(max-width: 400px) {\n    #footer { height: 135px; }\n    #chat_box { padding-bottom: 135px; }\n    #message { width: 100%; }\n    #send_btn {\n      position: relative;\n      margin-top: 3px;\n      width: 100%;\n    }\n  }\n</style>","x":364,"y":1308,"wires":[["25e6d442.31770c"]]},{"id":"25e6d442.31770c","type":"http response","z":"be89c2ae.50e6b","name":"","x":507,"y":1308,"wires":[]},{"id":"452989d8.6d8ed8","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"LED1 = global.get('LED1zw');\nLED2 = global.get('LED2zw');\nLDR = global.get('LDRzw');\nmsg.payload = {'LED1' : LED1, 'LED2' : LED2, 'LDR' : LDR };\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":80,"wires":[["da623213.309a9"]]},{"id":"af70a6db.8a8d88","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-zhiwei","applicationId":"","deviceType":"gw-zhiwei","eventType":"+","commandType":"LED_state","format":"json","name":"IBM IoT zw","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":false,"allFormats":"","qos":0,"x":140,"y":320,"wires":[["3702ab9e.fd6014"]]},{"id":"3702ab9e.fd6014","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"light1_i = parseInt(msg.payload.d.LED1);\nlight2_i = parseInt(msg.payload.d.LED2);\nlight1_s = \"off\";\nlight2_s = \"off\";\nif(light1_i == 1){\n    light1_s = \"on\"\n}\nif(light2_i == 1){\n    light2_s = \"on\"\n}\nglobal.set('LED1zw',light1_s)\nglobal.set('LED2zw',light2_s)\nmsg.payload = {'LED1' : light1_s, 'LED2' : light2_s};\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":440,"wires":[["ddd5506a.ba4f5"]]},{"id":"ddd5506a.ba4f5","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":550,"y":440,"wires":[]},{"id":"f2b74f5a.0dab9","type":"inject","z":"be89c2ae.50e6b","name":"JSON 1, 1","topic":"","payload":"{\"d\":{\"LED1\":1,\"LED2\":1}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":120,"y":380,"wires":[["3702ab9e.fd6014"]]},{"id":"cf3af070.eea3f","type":"inject","z":"be89c2ae.50e6b","name":"JSON 0, 0","topic":"","payload":"{\"d\":{\"LED1\":0,\"LED2\":0}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":160,"y":440,"wires":[["3702ab9e.fd6014"]]},{"id":"ca668c64.e18fa","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-gabby","applicationId":"","deviceType":"gw-gabby","eventType":"+","commandType":"LED_state","format":"json","name":"IBM IoT gabby","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":false,"allFormats":"","qos":0,"x":180,"y":800,"wires":[["7e03c1a8.53c18"]]},{"id":"bdf1c597.9fa288","type":"inject","z":"be89c2ae.50e6b","name":"JSON 1, 1","topic":"","payload":"{\"d\":{\"LED1\":1,\"LED2\":1}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":160,"y":860,"wires":[["7e03c1a8.53c18"]]},{"id":"94853e4.29d62c","type":"inject","z":"be89c2ae.50e6b","name":"JSON 0, 0","topic":"","payload":"{\"d\":{\"LED1\":0,\"LED2\":0}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":180,"y":920,"wires":[["7e03c1a8.53c18"]]},{"id":"7e03c1a8.53c18","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"light1_i = parseInt(msg.payload.d.LED1);\nlight2_i = parseInt(msg.payload.d.LED2);\nlight1_s = \"off\";\nlight2_s = \"off\";\nif(light1_i == 1){\n    light1_s = \"on\"\n}\nif(light2_i == 1){\n    light2_s = \"on\"\n}\nglobal.set('LED1g',light1_s)\nglobal.set('LED2g',light2_s)\nmsg.payload = {'LED1' : light1_s, 'LED2' : light2_s};\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":920,"wires":[["1be9f958.144857"]]},{"id":"1be9f958.144857","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":530,"y":920,"wires":[]},{"id":"72fff09c.a3ed4","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"LED1 = global.get('LED1g');\nLED2 = global.get('LED2g');\nLDR = global.get('LDRg');\nmsg.payload = {'LED1' : LED1, 'LED2' : LED2, 'LDR' : LDR };\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":120,"wires":[["7a5b9bad.8022b4"]]},{"id":"36ce09b4.b44ce6","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-gabby","applicationId":"","deviceType":"gw-gabby","eventType":"+","commandType":"","format":"json","name":"IBM IoT gabby","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":131,"y":1153,"wires":[["aeb97b4c.99bf38"]]},{"id":"aeb97b4c.99bf38","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":390,"y":1140,"wires":[]},{"id":"17cc1cc7.df8ed3","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-zhiwei","applicationId":"","deviceType":"gw-zhiwei","eventType":"+","commandType":"LDR_value","format":"json","name":"LDR zw","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":false,"allFormats":"","qos":0,"x":130,"y":500,"wires":[["d3de974f.2db528","270b77fa.d268e8"]]},{"id":"2915968a.aff2ca","type":"inject","z":"be89c2ae.50e6b","name":"JSON 1024","topic":"","payload":"{\"d\":{\"LDR\":1024}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":110,"y":560,"wires":[["d3de974f.2db528"]]},{"id":"6654d1df.9a1ce","type":"inject","z":"be89c2ae.50e6b","name":"JSON 512","topic":"","payload":"{\"d\":{\"LDR\":512}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":140,"y":600,"wires":[["d3de974f.2db528"]]},{"id":"d3de974f.2db528","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"LDR_i = parseInt(msg.payload.d.LDR);\nglobal.set('LDRzw', LDR_i)\nmsg.payload = {'LDR' : LDR_i};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":540,"wires":[["10c30f49.9042c1"]]},{"id":"10c30f49.9042c1","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":470,"y":560,"wires":[]},{"id":"270b77fa.d268e8","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":390,"y":500,"wires":[]},{"id":"333227b5.f3ef18","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-gabby","applicationId":"","deviceType":"gw-gabby","eventType":"+","commandType":"LDR_value","format":"json","name":"LDR gabby","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":false,"allFormats":"","qos":0,"x":160,"y":1000,"wires":[["5f33879e.947558","61f28d1e.259da4"]]},{"id":"297c93b8.c6a78c","type":"inject","z":"be89c2ae.50e6b","name":"JSON 1024","topic":"","payload":"{\"d\":{\"LDR\":1024}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":170,"y":1040,"wires":[["5f33879e.947558"]]},{"id":"378da578.a8f7ba","type":"inject","z":"be89c2ae.50e6b","name":"JSON 512","topic":"","payload":"{\"d\":{\"LDR\":512}}","payloadType":"json","repeat":"","crontab":"","once":false,"x":160,"y":1080,"wires":[["5f33879e.947558"]]},{"id":"5f33879e.947558","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"LDR_i = parseInt(msg.payload.d.LDR);\nglobal.set('LDRg', LDR_i)\nmsg.payload = {'LDR' : LDR_i};\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":1040,"wires":[["306cbdeb.839f92"]]},{"id":"306cbdeb.839f92","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":490,"y":1060,"wires":[]},{"id":"61f28d1e.259da4","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":410,"y":1000,"wires":[]},{"id":"80efcbbe.f3fc68","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"cmd","deviceId":"gwid-gw-zhiwei","applicationId":"","deviceType":"gw-zhiwei","eventType":"+","commandType":"","format":"json","name":"IBM IoT zhiwei","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":600,"y":1160,"wires":[["c0e5afc0.6a62b"]]},{"id":"c0e5afc0.6a62b","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":850,"y":1160,"wires":[]},{"id":"9bcdc5f9.28abd8","type":"ibmiot in","z":"be89c2ae.50e6b","authentication":"boundService","apiKey":"","inputType":"evt","deviceId":"gwid-gw-gabby","applicationId":"","deviceType":"gw-gabby","eventType":"event","commandType":"LDR_value","format":"json","name":"LDR gabby","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allEvents":false,"allCommands":false,"allFormats":"","qos":"2","x":122.5,"y":1451,"wires":[["77d54fe.2ea6fb","273413b5.f8d74c"]]},{"id":"77d54fe.2ea6fb","type":"function","z":"be89c2ae.50e6b","name":"fn","func":"lightvalue = parseInt(msg.payload.d.light);\nglobal.set('light', lightvalue)\nmsg.payload = {'light' : lightvalue};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1500,"wires":[["4b7f328e.a1f03c"]]},{"id":"4b7f328e.a1f03c","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":410,"y":1560,"wires":[]},{"id":"273413b5.f8d74c","type":"debug","z":"be89c2ae.50e6b","name":"","active":true,"console":"false","complete":"payload","x":372.5,"y":1451,"wires":[]},{"id":"5c4ad63c.548c58","type":"websocket-listener","path":"/ws/chat","wholemsg":"false"}]